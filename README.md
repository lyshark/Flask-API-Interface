# Flask-API-Interface

运用Flask 开发的一款简单的API接口，支持GET/POST请求响应，只是写着玩的一个小玩意。

## 3.1 获取Token

**说 明：获取登陆用户token**

**请求URL：**http://127.0.0.1/login

**请求方式：POST**

**参数说明：**

  ----------------- ----------------- ----------------- -----------------
  **参数名**        **类型**          **示例**          **说明**

  username          sting             lyshark           必填：用户名

  password          sting             123456            必填：密码
  ----------------- ----------------- ----------------- -----------------

**返回结果： 1：成功，0：失败**

**返回示例：**

{\"status\": \"1\",\"token\": \"zSD5nYdth8yCM35uQsFodzvzrkqoblOL\"}

## 3.2 验证Token

**说 明：验证当前token是否有效**

**请求URL：**http://127.0.0.1/is_login

**请求方式：POST**

**参数说明：**

  -------------- ------------ ---------------------------------- -------------------
  **参数名**     **类型**     **示例**                           **说明**

  token          String       zSD5nYdth8yCM35uQsFodzvzrkqoblOL   必填，Token字符串
  -------------- ------------ ---------------------------------- -------------------

**返回示例： 1：成功，0：失败**

{\"status\": \"1\",\"user\": \"lyshark\"}

## 3.3 刷新Token

**说 明：重新获得token ，刷新后需重新登录获取**

**请求URL：**http://127.0.0.1/flush_token

**请求方式：POST**

**参数说明：**

  -------------- -------------- ---------------------------------- -------------------
  **参数名**     **类型**       **示例**                           **说明**

  token          String         zSD5nYdth8yCM35uQsFodzvzrkqoblOL   必填，Token字符串
  -------------- -------------- ---------------------------------- -------------------

**返回示例：1：成功，0：失败**

{\"status\": \"1\",\"message\": \"已刷新\"}

## 3.4 创建定位对象

**说 明：创建定位对像**

**请求URL：**http://127.0.0.1/create_object

**请求方式：POST**

**参数说明：**

  ---------------- ----------- ---------------------------------- --------------------
  **参数名**       **类型**    **示例**                           **说明**

  token            String      zSD5nYdth8yCM35uQsFodzvzrkqoblOL   必填，Token字符串

  uname            string      张三                               必填：姓名

  mobile           string      18611110000                        必填:手机号

  ugroup           String      测试组                             必填：组名称

  service_mobile   String      40088881111                        必填：客服电话

  message_name     String      车管家                             必填：订购业务名称
  ---------------- ----------- ---------------------------------- --------------------

**返回示例：**

{\"status\": \"1\",\"message\": \"已新增定位对象\"}

## 3.5 查询定位对象

**说 明：获取所有定位对像信息**

**请求URL：**http://127.0.0.1/select_all_object

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         String        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串
  ------------- ------------- ---------------------------------- -------------------

**返回示例：1：成功，0：失败**

{\"status\":\"1\",\"count\":2,\"message\":

\[

\[\"王瑞\",\"15646596977\",\"系统技术部\",\"67882255\",\"你好世界,这是一段测试文档\"\],

\[\"王瑞\",\"15646596978\",\"系统技术部\",\"67882255\",\"你好世界,这是一段测试文档\"\]

\]

}

## 3.6 删除定位对象

**说 明：删除定位对像**

**请求URL：**http://127.0.0.1/delete_object

**请求方式：POST**

**参数说明：**

  ------------ ------------ ---------------------------------- -------------------
  **参数名**   **类型**     **示例**                           **说明**

  token        string       WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile       string       18611110000                        必填：手机号
  ------------ ------------ ---------------------------------- -------------------

**返回未例：1：成功，0：失败**

{\"status\": \"1\", \"message\": \"定位对象已删除\"}

## 3.7 查询所有用户组

**说 明：查询所有组名称**

**请求URL：**http://127.0.0.1/select_all_group

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串
  ------------- ------------- ---------------------------------- -------------------

**返回结果：**

{\"status\": \"1\", \"count\": 3, \"message\": \[\"系统技术部\", \"系统运维组\", \"系统测试组\"\]}

## 3.8 查询特定组 组内成员

**说 明：查询组成员**

**请求URL：**http://127.0.0.1/select_user_group

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  group         string        测试组                             必填：组名
  ------------- ------------- ---------------------------------- -------------------

**返回示例：**

{\"status\": \"1\", \"count\": 2, \"group\": \"系统技术部\", \"message\": \[\[\"王瑞\", \"15646596977\", \"未授权用户\"\], \[\"郑凯\", \"15646585548\",\"已授权用户\"\]\]}

## 3.9 修改当前用户组

**说 明：修改用户归属组**

**请求URL：**http://127.0.0.1/update_user_group

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile        string        18611110000                        必填：手机号

  group         string        测试组                             必填：组名
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"message\": \"已更新\"}

## 3.10 获取定位对象经纬度

**说 明：获取用户实时经纬度**

**请求URL：**http://127.0.0.1/select_lat

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile        string        18611110000                        必填：手机号
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"mobile\": \"18611110000\", \"longitude\": \"172.43\", \"latitude\": \"22.56\"}

## 3.11 查询接口调用次数与费率信息

**说 明：获取登陆用户接口调用次数**

**请求URL：**http://127.0.0.1/select_all_count

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串
  ------------- ------------- ---------------------------------- -------------------

**返回示例：1：成功，0：失败**

{\"status\": \"1\", \"lat_count\": 111, \"lat_rate\": 1.5, \"trajectory_count\": 255, \"trajectory_rate\": 5.4, \"enclosure_count\":444, \"enclosure_rate\": 7}

## 3.12 查询指定手机号调用次数与费率信息

**说 明：获取手机号调用次数**

**请求URL：**http://127.0.0.1/select_mobile_count

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile        string        18611110000                        必填：手机号
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"mobile\": \"15646596988\", \"lat_count\": 100, \"lat_rate\": 1.5, \"trajectory_count\": 255, \"trajectory_rate\":5.4, \"enclosure_count\": 444,  \"enclosure_rate\": 7}

## 3.13 查询授权/非授权用户列表

**说 明：查询授权于非授权用户列表**

**请求URL：**http://127.0.0.1/select_auth_table

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"unauthorized\": \[\"15646596977\", \"15646596988\"\], \"authorized\": \[\"15646585548\"\]}

## 3.14 发送验证码

**说 明：发送验证码获取授权**

**请求URL：**http://127.0.0.1/send_message

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile        string        18611110000                        必填：手机号
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"message\": \"验证码已发送,请注意查收\"}

## 3.15 验证授权

**说 明：验证授权**

**请求URL：**http://127.0.0.1/set_auth

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile        string        18611110000                        必填：手机号
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"message\": \"已授权\"}

## 3.16 取消授权

**说 明：取消用户授权**

**请求URL：**http://127.0.0.1/unset_auth

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile        string        18611110000                        必填：手机号
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"mobile\": \"15646585548\", \"message\": \"取消授权成功\"}

## 3.17 创建轨迹任务

**说 明：创建一个新的轨迹任务**

**请求URL：**http://127.0.0.1/create_trajectory_task

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- ------------------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  uid           int           1001                               必填：最好四位数字，不可重复

  task_name     string        轨迹任务测试1                      轨迹任务名

  mobile        string        15646585548                        手机号

  start_time    string        2022-01-12 12:55                   轨迹开始时间

  end_time      string        2022-01-13 12:55                   轨迹结束时间
  ------------- ------------- ---------------------------------- ------------------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"mobile\": \"15646585548\", \"message\": \"创建轨迹任务成功\"}

## 3.18 查询所有轨迹任务

**说 明：查询当前创建过的所有轨迹任务**

**请求URL：**http://127.0.0.1/select_trajectory_task

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- -------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串
  ------------- ------------- ---------------------------------- -------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"count\": 2, \"message\": \[{\"uid\": 1003, \"task_name\": \"轨迹任务测试1\", \"mobile\": \"15646585548\", \"start_time\": \"2022-01-12 12:55\", \"end_time\": \"2022-02-12 12:55\", \"count\": 0, \"rate\": 0.0}, {\"uid\": 1004, \"task_name\": \"轨迹任务测试1\", \"mobile\": \"15646596977\", \"start_time\": \"2022-01-12 12:55\", \"end_time\": \"2022-02-12 12:55\", \"count\": 0, \"rate\": 0.0}\]}

## 3.19 删除轨迹任务

**说 明：根据uid删除一个轨迹任务**

**请求URL：**http://127.0.0.1/delete_trajectory_task

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- ------------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  uid           int           1001                               必填：删除某个轨迹任务
  ------------- ------------- ---------------------------------- ------------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"message\": \"删除成功\"}

## 3.20 查询轨迹任务历史

**说 明：根据uid删除一个轨迹任务**

**请求URL：**http://127.0.0.1/select_trajectory_task_history

**请求方式：POST**

**参数说明：**

  ------------- ------------- ---------------------------------- --------------------------
  **参数名**    **类型**      **示例**                           **说明**

  token         string        WCdDltOnvCwrJnA1hKKm9TrmdLUK2CZW   必填：token字符串

  mobile        string        19254654423                        必填：手机号

  start_time    string        2022-02-11 10:00                   必填：开始时间，注意格式

  end_time      string        2022-02-11 10:00                   必填：结束时间，注意格式
  ------------- ------------- ---------------------------------- --------------------------

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"message\": \[\[\"2022-02-11 12:00\", 12.5, 22.4\], \[\"2022-02-11 12:00\", 12.5, 22.4\], \[\"2022-02-11 12:01\",

12.5, 22.4\], \[\"2022-02-11 12:01\", 12.5, 22.4\], \[\"2022-02-11 12:02\", 12.5, 22.4\], \[\"2022-02-11 12:02\", 12.5, 22.4\],

\[\"2022-02-11 12:03\", 12.5, 22.4\], \[\"2022-02-11 12:03\", 12.5, 22.4\], \[\"2022-02-11 12:04\", 12.5, 22.4\], \[\"2022-02-11

12:04\", 12.5, 22.4\], \[\"2022-02-11 12:05\", 12.5, 22.4\], \[\"2022-02-11 12:05\", 12.5, 22.4\]\]}

## 3.17 查询API版本

**说 明：查询当前API版本信息**

**请求URL：**http://127.0.0.1/get_version

**请求方式：POST**

**返回结果：1：成功，0：失败**

{\"status\": \"1\", \"version\": \"1.0.0\", \"build\": \"2021-12-15 9:57\"}
